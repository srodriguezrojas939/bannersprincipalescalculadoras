<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Calculadora Zen â€“ WebM REAL</title>
<style>
body{
    background:#e5e5e5;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:30px;
    font-family:system-ui;
}
button{
    margin-top:20px;
    padding:14px 22px;
    border:none;
    border-radius:14px;
    background:#333;
    color:white;
    font-weight:bold;
    cursor:pointer;
}
</style>
</head>
<body>

<canvas id="scene" width="360" height="520"></canvas>
<button onclick="record()">Descargar WebM (6s)</button>

<script>
const canvas = document.getElementById("scene");
const ctx = canvas.getContext("2d");

let t = 0;

// ===== DIBUJO CALCULADORA =====
function drawCalculator(press){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // fondo
    ctx.fillStyle="#f0f0f0";
    ctx.beginPath();
    ctx.roundRect(20,20,320,480,50);
    ctx.fill();

    // pantalla
    ctx.fillStyle="#fff";
    ctx.beginPath();
    ctx.roundRect(50,50,260,120,30);
    ctx.fill();

    // botones
    const baseY = 210;
    const size = 70 * (1 - press*0.12); // ðŸ”½ mÃ¡s pequeÃ±o
    const depth = 10 + press*8;         // â¬‡ï¸ mÃ¡s grueso

    const buttons = [
        ["+",60,baseY],
        ["-",145,baseY],
        ["=",230,baseY],
        ["Ã—",60,baseY+90],
        ["Ã·",145,baseY+90],
    ];

    buttons.forEach(b=>{
        ctx.fillStyle="#888";
        ctx.beginPath();
        ctx.roundRect(b[1],b[2]+depth,size,size,35);
        ctx.fill();

        ctx.fillStyle="#aaa";
        ctx.beginPath();
        ctx.roundRect(b[1],b[2],size,size,35);
        ctx.fill();

        ctx.fillStyle="#333";
        ctx.font="bold 32px system-ui";
        ctx.textAlign="center";
        ctx.textBaseline="middle";
        ctx.fillText(b[0], b[1]+size/2, b[2]+size/2);
    });
}

// ===== LOOP DE ANIMACIÃ“N =====
function animate(){
    t += 0.03;
    const press = Math.abs(Math.sin(t)); // 0 â†’ 1 â†’ 0
    drawCalculator(press);
    requestAnimationFrame(animate);
}
animate();

// ===== GRABAR WEBM =====
function record(){
    const stream = canvas.captureStream(60);
    const recorder = new MediaRecorder(stream,{
        mimeType:"video/webm;codecs=vp9",
        videoBitsPerSecond:3_000_000
    });

    const chunks=[];
    recorder.ondataavailable=e=>chunks.push(e.data);
    recorder.onstop=()=>{
        const blob=new Blob(chunks,{type:"video/webm"});
        const a=document.createElement("a");
        a.href=URL.createObjectURL(blob);
        a.download="calculadora-zen.webm";
        a.click();
    };

    recorder.start();
    setTimeout(()=>recorder.stop(),6000);
}
</script>

</body>
</html>

